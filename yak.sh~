#!/usr/bin/env bash

function instruct {  
  cmd="qdbus org.kde.yakuake $1"
  eval $cmd &> /dev/null
  sleep 0.5
}

# Automatically open on startup
instruct "/yakuake/window org.kde.yakuake.toggleWindowState"

# TAB 0 (sess 1)
instruct "/yakuake/sessions org.kde.yakuake.addSession"  
instruct "/yakuake/sessions org.kde.yakuake.splitSessionTopBottom 0"  
# Memory
instruct "/yakuake/tabs org.kde.yakuake.setTabTitle 0 'RAM'"  
# Inject command
instruct "/Sessions/1 org.kde.konsole.Session.sendText 'free -m'"  
instruct "/Sessions/1 org.kde.konsole.Session.sendText \$'\n'" # hits enter

# TAB 1 (sess 2)
# System monitoring
instruct "/yakuake/tabs org.kde.yakuake.setTabTitle 1 'Monitoring'"  
# Inject command
instruct "/Sessions/2 org.kde.konsole.Session.sendText 'top'"  
instruct "/Sessions/2 org.kde.konsole.Session.sendText \$'\n'" # hits enter  